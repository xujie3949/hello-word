# 一体化编辑平台性能测试方案

## 目录

1. [页面初次加载](#页面初次加载)
1. [地图页面刷新](#地图页面刷新)
1. [选择任务进入地图页面]（#选择任务进入地图页面）
1. [要素选择](#要素选择)
1. [要素捕捉](#要素捕捉)
1. [反馈刷新](#反馈刷新)
1. [地图渲染](#地图渲染)

## 页面初次加载

测试页面初次加载的性能

### 数据条件

清空缓存

### 操作步骤

1. 清除浏览器缓存
1. 按f12打开开发者工具
1. 地址栏输入编辑器地址并回车
1. 观察开发者工具network页面显示信息

### 测试指标

页面加载总时间小于10秒

## 地图页面刷新

测试地图页面刷新的性能

### 数据条件

北京数据

### 操作步骤

1. 登陆编辑器，选择一个数据密集的任务进入到地图页面
1. 按f12打开开发者工具
1. 刷新页面
1. 观察开发者工具network页面显示信息

### 测试指标

页面重新加载总时间小于7秒

## 选择任务进入地图页面

测试从选择任务进入地图页面的性能

### 数据条件

北京数据

### 操作步骤

1. 登陆编辑器
1. 按f12打开开发者工具
1. 选择一个数据密集的任务进入到地图页面
1. 观察开发者工具控制台页面产生的日志

### 测试指标

选择任务到进入页面总时间小于2秒

## 要素选择

测试地图要素选择的性能

### 数据条件

1. 北京数据密集区域，被选择的瓦片中总数据量应该大于1000条
1. 地图等级17-20

### 操作步骤

1. 登陆编辑器，选择一个任务进入到地图页面
1. 按f12打开开发者工具
1. 右键点击选择按钮，选择框选
1. 在地图上框选要素
1. 观测开发者工具控制台面板中输出的日志

### 测试指标

要素查询时间小于0.5秒

## 要素捕捉

测试地图要素捕捉的性能

### 数据条件

1. 北京数据密集区域，被捕捉的瓦片中rdlink据量应该大于1000条
1. 地图等级17-20

### 操作步骤

1. 登陆编辑器，选择一个任务进入到地图页面
1. 按f12打开开发者工具
1. 点击创建rdlink按钮
1. 进入rdlink绘制工具，取消掉rdnode捕捉，保留rdlink捕捉
1. 在地图上移动鼠标捕捉要素
1. 观测开发者工具控制台面板中输出的日志

### 测试指标

单次要素捕捉时间小于0.5秒

## 反馈刷新

测试地图反馈刷新的性能

### 数据条件

1. 形状点个数大于500个
1. 地图等级17-20

### 操作步骤

1. 登陆编辑器，选择一个任务进入到地图页面
1. 按f12打开开发者工具
1. 点击创建rdlink按钮
1. 在地图上绘制形状点
1. 观测开发者工具控制台面板中输出的日志

### 测试指标

单次反馈刷新的时间小于0.5秒

## 地图渲染

测试地图渲染的性能

### 数据条件

1. 北京数据密集区域
1. 地图等级8-20
1. 全要素渲染

### 操作步骤

1. 登陆编辑器，选择一个任务进入到地图页面
1. 按f12打开开发者工具
1. 按shift+esc打开chrome任务管理器
1. 将场景列表中的所有图层全部勾选
1. 平移和缩放地图
1. 观测开发者工具控制台面板中输出的日志和chrome任务管理器中的cpu和内存占用情况

### 测试指标

1. 渲染总时间小于2秒（包含服务请求）
1. cpu占用小于30%
1. 内存占用小于500M
